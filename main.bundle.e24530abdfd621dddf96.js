(()=>{"use strict";var e={66:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".katex-display {\n  display: inline-block !important;\n  margin: 0 !important;\n  text-align: inherit !important;\n}\n",""]);const i=o},920:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".src-Cursor-style__cursorBar__1EnhC {\n  position: absolute;\n}\n\n.src-Cursor-style__cursorTextarea__2FWel {\n  font: inherit;\n  position: absolute;\n  overflow: hidden;\n  border: none;\n  outline: none;\n  resize: none;\n  padding: 0px;\n  z-index: 1;\n}\n\n.src-Cursor-style__suggestionList__3q9QB {\n  position: absolute;\n  margin: 0px;\n  padding: 0px;\n  border-radius: 6px;\n  box-shadow: 0px 1px 2px #cccccc;\n  background-color: #ffffff;\n  overflow-y: scroll;\n  z-index: 1;\n}\n\n.src-Cursor-style__suggestionItem__6CrA8 {\n  list-style-type: none;\n  cursor: pointer;\n  padding-left: 20px;\n  padding-right: 20px;\n  padding-top: 2px;\n  padding-bottom: 2px;\n  border-bottom: 1px solid #eaecef;\n  overflow: hidden;\n  white-space: nowrap;\n  overflow-y: scroll;\n  text-overflow: ellipsis;\n}\n\n.src-Cursor-style__suggestionItem__6CrA8:hover {\n  background-color: #f6f8fa;\n}\n\n.src-Cursor-style__suggestionItem__6CrA8[aria-selected='true'] {\n  background-color: #f6f8fa;\n}\n",""]),o.locals={cursorBar:"src-Cursor-style__cursorBar__1EnhC",cursorTextarea:"src-Cursor-style__cursorTextarea__2FWel",suggestionList:"src-Cursor-style__suggestionList__3q9QB",suggestionItem:"src-Cursor-style__suggestionItem__6CrA8"};const i=o},3:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".src-Editor-style__root__2wGMq {\n  width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n  position: relative;\n  user-select: none;\n}\n\n.src-Editor-style__editor__hVtKO {\n  width: 100%;\n  height: auto;\n  min-height: 100%;\n  cursor: text;\n}\n",""]),o.locals={root:"src-Editor-style__root__2wGMq",editor:"src-Editor-style__editor__hVtKO"};const i=o},847:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".src-Selection-style__selection__2yf4s {\n  position: absolute;\n  background-color: #accef7;\n  opacity: 0.5;\n}\n",""]),o.locals={selection:"src-Selection-style__selection__2yf4s"};const i=o},459:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".src-TextLines-style__textlines__rgNVd {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n\n.src-TextLines-style__lineGroup__2QMEF {\n  display: block;\n  position: relative;\n}\n\n.src-TextLines-style__line__2U6HI {\n  display: block;\n  position: relative;\n}\n\n.src-TextLines-style__indent__cj3Xh {\n  left: 0px;\n  top: 0px;\n  position: absolute;\n}\n\n.src-TextLines-style__indentPad__3DVzp {\n  display: inline-block;\n  width: 1.5em;\n  overflow: hidden;\n}\n\n.src-TextLines-style__itemBullet__3p3Jl {\n  top: 0.5em;\n  right: 0.75em;\n  position: absolute;\n  display: block;\n  width: 5px;\n  height: 5px;\n  border-radius: 50%;\n  background-color: #000000;\n}\n\n.src-TextLines-style__content__UBkeq {\n  display: block;\n}\n\n.src-TextLines-style__charGroup__1Epg- {\n  display: inline-block;\n}\n\n.src-TextLines-style__char__6cS9b {\n  display: inline-block;\n}\n",""]),o.locals={textlines:"src-TextLines-style__textlines__rgNVd",lineGroup:"src-TextLines-style__lineGroup__2QMEF",line:"src-TextLines-style__line__2U6HI",indent:"src-TextLines-style__indent__cj3Xh",indentPad:"src-TextLines-style__indentPad__3DVzp",itemBullet:"src-TextLines-style__itemBullet__3p3Jl",content:"src-TextLines-style__content__UBkeq",charGroup:"src-TextLines-style__charGroup__1Epg-",char:"src-TextLines-style__char__6cS9b"};const i=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);r&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],c=0;c<e.length;c++){var l=e[c],s=r.base?l[0]+r.base:l[0],u=i[s]||0,d="".concat(s," ").concat(u);i[s]=u+1;var f=n(d),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==f?(t[f].references++,t[f].updater(p)):t.push({identifier:d,updater:o(p,r),references:1}),a.push(d)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var c=n(i[a]);t[c].references--}for(var l=r(e,o),s=0;s<i.length;s++){var u=n(i[s]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=ReactDOM,t=React;var r=n(379),o=n.n(r),i=n(795),a=n.n(i),c=n(569),l=n.n(c),s=n(565),u=n.n(s),d=n(216),f=n.n(d),p=n(589),m=n.n(p),g=n(3),h={};h.styleTagTransform=m(),h.setAttributes=u(),h.insert=l().bind(null,"head"),h.domAPI=a(),h.insertStyleElement=f(),o()(g.Z,h);const y=g.Z&&g.Z.locals?g.Z.locals:void 0;var x={root:{className:y.root},editor:{className:y.editor},historyMaxLength:50};function v(){return navigator.userAgent.indexOf("Mac OS X")>-1}function b(e){return e.split(" ").map((function(e){return".".concat(e)})).join("")}var I=n(920),k={};k.styleTagTransform=m(),k.setAttributes=u(),k.insert=l().bind(null,"head"),k.domAPI=a(),k.insertStyleElement=f(),o()(I.Z,k);const S=I.Z&&I.Z.locals?I.Z.locals:void 0;var P={width:250,maxHeight:100,fontSize:14},w={cursorBar:{className:S.cursorBar,style:function(e,t){return{top:"".concat(e.top,"px"),left:"".concat(e.left,"px"),height:"".concat(t,"px")}}},svg:{width:"2px"},rect:{x:0,y:0,width:"1px",height:"100%"},textArea:{className:S.cursorTextarea,wrap:"off",spellCheck:!1,autoCapitalize:"none",style:function(e,t,n){return{top:"".concat(e.top,"px"),left:"".concat(e.left,"px"),width:"".concat(Math.min(n,10)*t,"px"),height:"".concat(t,"px"),minHeight:"".concat(t,"px"),fontSize:"".concat(t,"px")}}},suggestion:{list:{className:S.suggestionList,style:function(e,t,n,r,o){return{top:"".concat(e.top+t+2,"px"),left:"".concat(e.left,"px"),width:"".concat(n,"px"),maxHeight:"".concat(r,"px"),display:o?"none":void 0}}},item:{className:function(e){return"".concat(S.suggestionItem," Item").concat(e)},style:function(e){return{fontSize:"".concat(e,"px")}}}}},O=n(459),C={};C.styleTagTransform=m(),C.setAttributes=u(),C.insert=l().bind(null,"head"),C.domAPI=a(),C.insertStyleElement=f(),o()(O.Z,C);const E=O.Z&&O.Z.locals?O.Z.locals:void 0;function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(){j=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=new RegExp(e,r);return t.set(i,o||t.get(e)),M(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){return t[n]=e[r[n]],t}),Object.create(null))}return L(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);return n&&(n.groups=r(n,this)),n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+i[t]})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!==_(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},j.apply(this,arguments)}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T={fontSizes:{level1:16,level2:20,level3:24}},D=/[^[\]]+/,N={color:"#5E8AF7",cursor:"text"},A={color:"#425A9D",cursor:"pointer"},K={fontFamily:"SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace",backgroundColor:"rgba(27, 31, 35, 0.05)"},z={fontFamily:"SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace",backgroundColor:"rgba(27, 31, 35, 0.05)"},$={className:E.textlines,quotation:{content:{style:{backgroundColor:"rgba(125,128,128,0.1)",borderLeft:"solid 4px #a0a0a0",paddingLeft:"4px",fontStyle:"italic"}}},decoration:{style:function(e){return{fontSize:"".concat(e.fontSize,"px"),fontWeight:e.bold?"bold":void 0,fontStyle:e.italic?"italic":void 0,borderBottom:e.underline?"solid 1px":void 0}}},lineGroup:{className:function(e,t){return"".concat(E.lineGroup," L").concat(e,"-").concat(t)},classNameRegex:RegExp("".concat(E.lineGroup," L(?<from>\\d+)-(?<to>\\d+)")),indent:{className:E.indent,style:function(e){return{width:"".concat(1.5*e,"em")}}},pad:{className:E.indentPad},content:{className:E.content,style:function(e){return{marginLeft:"".concat(1.5*e,"em")}}}},line:{className:function(e){return"".concat(E.line," L").concat(e)},classNameRegex:RegExp("".concat(E.line," L(?<lineIndex>\\d+)")),indent:{className:E.indent,style:function(e){return{width:"".concat(1.5*e,"em")}}},indentPad:{className:E.indentPad},content:{className:E.content,style:function(e){return{marginLeft:"".concat(1.5*e,"em")}}},style:function(e){return{fontSize:"".concat(e,"px"),minHeight:"".concat(e,"px")}}},itemization:{bullet:{className:E.itemBullet}},charGroup:{className:function(e,t,n){return"".concat(E.charGroup," L").concat(e,"C").concat(t,"-").concat(n)},classNameRegex:RegExp("".concat(E.charGroup," L(?<lineIndex>\\d+)C(?<from>\\d+)-(?<to>\\d+)"))},char:{className:function(e,t){return"".concat(E.char," L").concat(e,"C").concat(t)},classNameRegex:RegExp("".concat(E.char," L(?<lineIndex>\\d+)C(?<charIndex>\\d+)"))},regexes:{bracketSyntax:{itemization:j(/^([\t \u3000]*)([\t \u3000])(((?:(?![\t \u3000])[\s\S]).*)?)$/,{indent:1,bullet:2,content:3}),decoration:j(/^(.*?)\[([\*\/_]+) ((\[(?:(?!\])[\s\S])+\]|(?:(?!\])[\s\S]))+)\](.*)$/,{left:1,decoration:2,body:3,right:5})},markdownSyntax:{itemization:j(/^([\t \u3000]*)([\*\x2D])(((?:(?! )[\s\S]).*)?)$/,{indent:1,bullet:2,content:3}),heading:j(/^(#+) (.+)$/,{heading:1,body:2}),bold:j(/^(.*?)\*((?:(?![\t \*\u3000])[\s\S])(.*(?:(?![\t \*\u3000])[\s\S]))?)\*(.*)$/,{left:1,body:2,right:4}),italic:j(/^(.*?)_((?:(?![\t _\u3000])[\s\S])(.*(?:(?![\t _\u3000])[\s\S]))?)_(.*)$/,{left:1,body:2,right:4})},common:{blockCodeMeta:j(/^([\t \u3000]*)(```)$/,{indent:1,codeMeta:2}),blockCodeLine:function(e){return RegExp("^(?<indent>[ \\t\\u3000]{".concat(e,"})(?<codeLine>.*)$"))},blockFormulaMeta:j(/^([\t \u3000]*)(\$\$)$/,{indent:1,formulaMeta:2}),blockFormulaLine:function(e){return RegExp("^(?<indent>[ \\t\\u3000]{".concat(e,"})(?<formulaLine>.*)$"))},quotation:j(/^([\t \u3000]*)>(.*)$/,{indent:1,content:2}),inlineCode:j(/^(.*?)`((?:(?!`)[\s\S])+)`(.*)$/,{left:1,code:2,right:3}),displayFormula:j(/^(.*?)\$\$((?:(?!\$)[\s\S])+)\$\$(.*)$/,{left:1,formula:2,right:3}),inlineFormula:j(/^(.*?)\$((?:(?!\$)[\s\S])+)\$(.*)$/,{left:1,formula:2,right:3}),taggedLink:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D,n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=t.source;return RegExp("^(?<left>.*?)\\[(?<tag>".concat(n,": )(?<linkName>").concat(r,")\\](?<right>.*)$"))},bracketLink:j(/^(.*?)\[((?:(?![\[\]])[\s\S])+)\](.*)$/,{left:1,linkName:2,right:3}),hashTag:j(/^(.*?)(#(?:(?![\t \u3000])[\s\S])+)(.*)$/,{left:1,hashTag:2,right:3}),normal:j(/^(.+)$/,{text:1})}},wordRegex:/[^ !"#$%&'()*+,-./:;<=>?@[\\\]^`{|}~\t\u3000]+/};function R(e,t,n){var r=b(x.editor.className),o=n.closest(r);if(null==o)return null;var i=b($.char.className(e,t));return o.querySelector(i)}function F(e){return e.closest("div".concat(b(x.root.className)))}function H(e){return e.closest("div".concat(b(x.editor.className)))}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t,n){var r,o,i=null===(r=H(n))||void 0===r?void 0:r.getBoundingClientRect();if(!e.coordinate||!i)return G(G({},t),{},{position:{top:0,left:0},cursorSize:0});var a=e.coordinate,c=R(a.lineIndex,a.charIndex,n),l=null==c||null===(o=c.firstElementChild)||void 0===o?void 0:o.getBoundingClientRect();if(!c||!l)return G(G({},t),{},{position:{top:0,left:0},cursorSize:0});var s={top:l.top-i.top,left:l.left-i.left},u=l.height;return G(G({},t),{},{position:s,cursorSize:u})}function U(e,t,n){if(0==n)return t;var r=e.split("\n"),o=G({},t),i=o.lineIndex,a=o.charIndex;if(n>0)for(;n>0;){if(i==r.length-1){a+=Math.min(n,r[i].length-a);break}a+n<=r[i].length?(a+=n,n=0):(n-=r[i].length-a+1,i++,a=0)}else for(n=-n;n>0;){if(0==i){a-=Math.min(n,a);break}a-n>=0?(a-=n,n=0):(n-=a+1,a=r[--i].length)}return{lineIndex:i,charIndex:a}}function q(e,t){for(var n=e.split("\n"),r=0,o=0;o<t.lineIndex;o++)r+=n[o].length+1;return r+t.charIndex}function V(e,t){return e.lineIndex==t.lineIndex&&e.charIndex==t.charIndex}function Y(e,t){if(!t)return"";var n=X(t),r=n.start,o=n.end,i=q(e,r),a=q(e,o);return e.substring(i,a)}function X(e){var t=e.fixed,n=e.free;return t.lineIndex<n.lineIndex?{start:t,end:n}:t.lineIndex>n.lineIndex?{start:n,end:t}:t.charIndex<=n.charIndex?{start:t,end:n}:{start:n,end:t}}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.length;if(!t.cursorCoordinate)return[e,t];if(!t.textSelection){var o=q(e,t.cursorCoordinate),i=e.substring(0,o)+n+e.substring(o),a=U(i,t.cursorCoordinate,r),c=ae(t,[{actionType:"insert",coordinate:t.cursorCoordinate,text:n}]);return[i,de(re(re({},c),{},{cursorCoordinate:a}))]}var l=X(t.textSelection),s=l.start,u=l.end,d=q(e,s),f=q(e,u),p=e.substring(d,f),m=e.substring(0,d)+n+e.substring(f),g=U(m,s,r),h=ae(t,[{actionType:"delete",coordinate:s,text:p},{actionType:"insert",coordinate:s,text:n}]);return[m,de(re(re({},h),{},{cursorCoordinate:g}))]}function ae(e,t){var n=t.filter((function(e){return""!=e.text}));if(0==n.length)return e;if(-1==e.historyHead)return re(re({},e),{},{editActionHistory:n,historyHead:n.length-1});var r=e.editActionHistory,o=e.historyHead,i=[].concat(J(r.slice(0,o+1)),J(n)),a=i.slice(Math.max(0,i.length-x.historyMaxLength),i.length);return re(re({},e),{},{editActionHistory:a,historyHead:a.length-1})}function ce(e,t,n){if(!n.cursorCoordinate)return[e,ue(n)];var r=n.cursorCoordinate,o=r.lineIndex,i=r.charIndex,a=e.split("\n")[o];switch(a[i-1]){case"[":var c,l,s,u=null===(c=t.bracketLinkProps)||void 0===c?void 0:c.suggestions,d=(null===(l=t.bracketLinkProps)||void 0===l?void 0:l.initialSuggestionIndex)||0;return!u||0==u.length||null!==(s=t.bracketLinkProps)&&void 0!==s&&s.disabled?[e,ue(n)]:[e,re(re({},n),{},{suggestionType:"bracketLink",suggestions:u,suggestionIndex:d})];case"#":var f,p,m,g=null===(f=t.hashTagProps)||void 0===f?void 0:f.suggestions,h=(null===(p=t.hashTagProps)||void 0===p?void 0:p.initialSuggestionIndex)||0;return!g||0==g.length||null!==(m=t.hashTagProps)&&void 0!==m&&m.disabled?[e,ue(n)]:[e,re(re({},n),{},{suggestionType:"hashTag",suggestions:g,suggestionIndex:h})];case":":if(!t.taggedLinkPropsMap)return[e,ue(n)];var y=Object.keys(t.taggedLinkPropsMap).find((function(e){var t="[".concat(e,":"),n=[Math.max(i-t.length,0),i],r=n[0],o=n[1];return a.substring(r,o)==t})),x=y?t.taggedLinkPropsMap[y]:void 0,v=null==x?void 0:x.suggestions,b=(null==x?void 0:x.initialSuggestionIndex)||0;return v&&0!=v.length?[e,re(re({},n),{},{suggestionType:"taggedLink",suggestions:v,suggestionIndex:b})]:[e,ue(n)];default:return[e,ue(n)]}}function le(e,t,n){var r=Q(function(){switch(t.suggestionType){case"bracketLink":return ie(e,t,n);case"hashTag":return ie(e,t,"".concat(n.replaceAll(" ","_")," "));case"taggedLink":return ie(e,t," ".concat(n));case"none":return[e,t]}}(),2);return[r[0],ue(r[1])]}function se(e,t,n,r){var o=Q(n,2),i=o[0],a=o[1],c=document.elementsFromPoint(i,a),l=$.char.classNameRegex,s=c.find((function(e){return l.test(e.className)&&r.contains(e)})),u=$.charGroup.classNameRegex,d=c.find((function(e){return u.test(e.className)&&r.contains(e)})),f=$.line.classNameRegex,p=c.find((function(e){return f.test(e.className)&&r.contains(e)})),m=$.lineGroup.classNameRegex,g=c.find((function(e){return m.test(e.className)&&r.contains(e)})),h=x.editor.className,y=c.find((function(e){return e.className==h&&r.contains(e)})),v=e.split("\n");if(s){var b,I=null===(b=s.className.match(l))||void 0===b?void 0:b.groups,k=Number.parseInt(I.lineIndex,10),S=Number.parseInt(I.charIndex,10);if(S==v[k].length)return{lineIndex:k,charIndex:S};var P=s.getBoundingClientRect();return i<=P.left+P.width/2?{lineIndex:k,charIndex:S}:{lineIndex:k,charIndex:S+1}}if(d){var w,O=null===(w=d.className.match(u))||void 0===w?void 0:w.groups,C=Number.parseInt(O.lineIndex,10),E=Number.parseInt(O.from,10),_=Number.parseInt(O.to,10),j=d.getBoundingClientRect();return i<=j.left+j.width/2?{lineIndex:C,charIndex:E}:{lineIndex:C,charIndex:_}}if(p){var L,M=null===(L=p.className.match(f))||void 0===L?void 0:L.groups,T=Number.parseInt(M.lineIndex,10);return{lineIndex:T,charIndex:v[T].length}}if(g){var D,N=null===(D=g.className.match(m))||void 0===D?void 0:D.groups,A=Number.parseInt(N.from,10),K=Number.parseInt(N.to,10),z=g.getBoundingClientRect();return i<=z.left+z.width/2?{lineIndex:A,charIndex:0}:{lineIndex:K,charIndex:v[K].length}}return y?{lineIndex:v.length-1,charIndex:v[v.length-1].length}:t.cursorCoordinate}function ue(e){return re(re({},e),{},{suggestionType:"none",suggestions:[],suggestionIndex:-1})}function de(e){return re(re({},e),{},{textSelection:void 0,selectionWithMouse:"inactive"})}function fe(e){return re(re({},e),{},{textSelection:void 0,selectionWithMouse:"inactive",suggestionType:"none",suggestions:[],suggestionIndex:-1})}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t,n){if(!t.cursorCoordinate)return[e,t];if(t.textSelection)return ie(e,t,"");var r=t.cursorCoordinate,o=U(e,r,1);return ie(e,me(me({},t),{},{textSelection:{fixed:r,free:o}}),"")}function ye(e,t,n){if(!t.cursorCoordinate)return[e,t];if(t.textSelection)return ie(e,t,"");var r=t.cursorCoordinate,o=U(e,r,-1),i=U(e,r,1);switch(Y(e,{fixed:o,free:i})){case"[]":case"{}":case"()":return ie(e,me(me({},t),{},{textSelection:{fixed:o,free:i}}),"");default:return ie(e,me(me({},t),{},{textSelection:{fixed:o,free:r}}),"")}}function xe(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=e.split("\n")[t.cursorCoordinate.lineIndex-1];if(void 0===r)return[e,t];var o={lineIndex:t.cursorCoordinate.lineIndex-1,charIndex:Math.min(t.cursorCoordinate.charIndex,r.length)},i=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,r=me({},o);return V(e,r)?void 0:{fixed:e,free:r}}}();return[e,me(me({},t),{},{cursorCoordinate:o,textSelection:i})]}function ve(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=e.split("\n")[t.cursorCoordinate.lineIndex+1];if(void 0===r)return[e,t];var o={lineIndex:t.cursorCoordinate.lineIndex+1,charIndex:Math.min(t.cursorCoordinate.charIndex,r.length)},i=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,r=me({},o);return V(e,r)?void 0:{fixed:e,free:r}}}();return[e,me(me({},t),{},{cursorCoordinate:o,textSelection:i})]}function be(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=U(e,t.cursorCoordinate,-1),o=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,o=me({},r);return V(e,o)?void 0:{fixed:e,free:o}}}();return[e,me(me({},t),{},{cursorCoordinate:r,textSelection:o})]}function Ie(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=U(e,t.cursorCoordinate,1),o=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,o=me({},r);return V(e,o)?void 0:{fixed:e,free:o}}}();return[e,me(me({},t),{},{cursorCoordinate:r,textSelection:o})]}function ke(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=function(){for(var n=new RegExp($.wordRegex,"g"),r=e.split("\n")[t.cursorCoordinate.lineIndex],o=void 0,i=null;(i=n.exec(r))&&null!==i;){var a=n.lastIndex-i[0].length;if(a>=t.cursorCoordinate.charIndex)break;o=a}return{lineIndex:t.cursorCoordinate.lineIndex,charIndex:o||0}}(),o=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,o=me({},r);return V(e,o)?void 0:{fixed:e,free:o}}}();return[e,me(me({},t),{},{cursorCoordinate:r,textSelection:o})]}function Se(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=function(){for(var n=new RegExp($.wordRegex,"g"),r=e.split("\n")[t.cursorCoordinate.lineIndex],o=null;(o=n.exec(r))&&null!==o;){var i=n.lastIndex;if(i>t.cursorCoordinate.charIndex)return{lineIndex:t.cursorCoordinate.lineIndex,charIndex:i}}return{lineIndex:t.cursorCoordinate.lineIndex,charIndex:r.length}}(),o=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,o=me({},r);return V(e,o)?void 0:{fixed:e,free:o}}}();return[e,me(me({},t),{},{cursorCoordinate:r,textSelection:o})]}function Pe(e,t,n){if(!t.cursorCoordinate)return[e,t];var r={lineIndex:t.cursorCoordinate.lineIndex,charIndex:0},o=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,o=me({},r);return V(e,o)?void 0:{fixed:e,free:o}}}();return[e,me(me({},t),{},{cursorCoordinate:r,textSelection:o})]}function we(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=e.split("\n"),o={lineIndex:t.cursorCoordinate.lineIndex,charIndex:r[t.cursorCoordinate.lineIndex].length},i=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,r=me({},o);return V(e,r)?void 0:{fixed:e,free:r}}}();return[e,me(me({},t),{},{cursorCoordinate:o,textSelection:i})]}function Oe(e,t,n){if(!t.cursorCoordinate)return[e,t];var r={lineIndex:0,charIndex:0},o=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,o=me({},r);return V(e,o)?void 0:{fixed:e,free:o}}}();return[e,me(me({},t),{},{cursorCoordinate:r,textSelection:o})]}function Ce(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=e.split("\n"),o={lineIndex:r.length-1,charIndex:r[r.length-1].length},i=function(){if(n.shiftKey){var e=t.textSelection?t.textSelection.fixed:t.cursorCoordinate,r=me({},o);return V(e,r)?void 0:{fixed:e,free:r}}}();return[e,me(me({},t),{},{cursorCoordinate:o,textSelection:i})]}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t,n,r){if(!r)return[e,t];var o=se(e,t,[n.clientX,n.clientY],r);return[e,ue(Le(Le({},t),{},{cursorCoordinate:o,textSelection:void 0,selectionWithMouse:"fired"}))]}function De(e,t,n,r){if(!t.cursorCoordinate||"inactive"==t.selectionWithMouse||!r)return[e,t];if("fired"==t.selectionWithMouse)return[e,Le(Le({},t),{},{selectionWithMouse:"active"})];var o=se(e,t,[n.clientX,n.clientY],r);if(!o||V(o,t.cursorCoordinate))return[e,t];var i=t.textSelection?t.textSelection.fixed:Le({},t.cursorCoordinate),a=Le({},o),c=V(i,a)?void 0:{fixed:i,free:a};return[e,Le(Le({},t),{},{cursorCoordinate:o,textSelection:c})]}function Ne(e,t,n,r){if(!t.cursorCoordinate||"inactive"==t.selectionWithMouse||!r)return[e,t];if("active"!=t.selectionWithMouse)return[e,Le(Le({},t),{},{selectionWithMouse:"inactive"})];var o=se(e,t,[n.clientX,n.clientY],r),i=t.textSelection?t.textSelection.fixed:Le({},t.cursorCoordinate),a=o||Le({},t.cursorCoordinate),c=V(i,a)?void 0:{fixed:i,free:a};return[e,Le(Le({},t),{},{cursorCoordinate:o,textSelection:c,selectionWithMouse:"inactive"})]}function Ae(e,t,n,r){if(!r)return[e,t];var o=se(e,t,[n.clientX,n.clientY],r);switch(n.detail){case 2:var i=function(e,t){if(t)for(var n=new RegExp($.wordRegex,"g"),r=e.split("\n")[t.lineIndex],o=null;(o=n.exec(r))&&null!==o;){var i=n.lastIndex-o[0].length,a=n.lastIndex;if(!(a<t.charIndex)){if(i>t.charIndex)break;return{fixed:{lineIndex:t.lineIndex,charIndex:i},free:{lineIndex:t.lineIndex,charIndex:a}}}}}(e,o);return[e,Le(Le({},t),{},{textSelection:i})];case 3:var a=function(e,t){if(t){var n=e.split("\n")[t.lineIndex];return{fixed:{lineIndex:t.lineIndex,charIndex:0},free:{lineIndex:t.lineIndex,charIndex:n.length}}}}(e,o);return[e,Le(Le({},t),{},{textSelection:a})];default:return[e,t]}}function Ke(e,t,n,r){var o=function(e){return function(e){return v()&&"d"==e.key&&e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey}(e)?"forwardDelete":function(e){return(v()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey)&&"a"==e.key&&!e.altKey&&!e.shiftKey}(e)?"selectAll":function(e){return(v()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey)&&"z"==e.key&&!e.altKey&&!e.shiftKey}(e)?"undo":function(e){return(v()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey)&&(e.shiftKey&&"z"==e.key||!e.shiftKey&&"y"==e.key)&&!e.altKey}(e)?"redo":function(e){return e.ctrlKey&&("p"==e.key||"P"==e.key)&&!e.metaKey&&!e.altKey}(e)?"moveUp":function(e){return e.ctrlKey&&("n"==e.key||"N"==e.key)&&!e.metaKey&&!e.altKey}(e)?"moveDown":function(e){return e.ctrlKey&&("b"==e.key||"B"==e.key)&&!e.metaKey&&!e.altKey}(e)?"moveLeft":function(e){return e.ctrlKey&&("f"==e.key||"F"==e.key)&&!e.metaKey&&!e.altKey}(e)?"moveRight":function(e){return v()&&e.ctrlKey&&("a"==e.key||"A"==e.key)&&!e.metaKey&&!e.altKey}(e)?"moveLineTop":function(e){return v()&&e.ctrlKey&&("e"==e.key||"E"==e.key)&&!e.metaKey&&!e.altKey}(e)?"moveLineBottom":void 0}(r);if(!n.cursorCoordinate||n.isComposing||1==r.key.length&&!o)return[e,n];switch(r.preventDefault(),r.nativeEvent.stopImmediatePropagation(),r.key){case"Tab":return ie(e,n,"\t");case"Enter":if("none"!=n.suggestionType)return le(e,n,n.suggestions[n.suggestionIndex]);var i=Ee(ie(e,n,"\n"),2),a=i[0],c=i[1];if(!c.cursorCoordinate)return[a,c];if(!t.syntax||"bracket"==t.syntax){var l,s=null===(l=a.split("\n")[c.cursorCoordinate.lineIndex-1].match($.regexes.bracketSyntax.itemization))||void 0===l?void 0:l.groups;return s?ie(a,c,s.indent+s.bullet):[a,c]}if("markdown"==t.syntax){var u,d=null===(u=a.split("\n")[c.cursorCoordinate.lineIndex-1].match($.regexes.markdownSyntax.itemization))||void 0===u?void 0:u.groups;return d?ie(a,c,d.indent+d.bullet):[a,c]}return[a,c];case"Backspace":var f=Ee(ye(e,n),2);return ce(f[0],t,f[1]);case"Delete":var p=Ee(he(e,n),2);return ce(p[0],t,p[1]);case"ArrowUp":if(n.suggestions.length>0){var m=Math.max(n.suggestionIndex-1,0);return[e,Le(Le({},n),{},{suggestionIndex:m})]}return v()&&r.metaKey&&!r.ctrlKey&&!r.altKey?Oe(e,n,r):xe(e,n,r);case"ArrowDown":if(n.suggestions.length>0){var g=Math.min(n.suggestionIndex+1,n.suggestions.length-1);return[e,Le(Le({},n),{},{suggestionIndex:g})]}return v()&&r.metaKey&&!r.ctrlKey&&!r.altKey?Ce(e,n,r):ve(e,n,r);case"ArrowLeft":if(v()&&r.metaKey&&!r.ctrlKey&&!r.altKey)return Pe(e,n,r);if((v()?r.altKey&&!r.ctrlKey:r.ctrlKey&&!r.altKey)&&!r.metaKey)return ke(e,n,r);var h=Ee(be(e,n,r),2);return ce(h[0],t,h[1]);case"ArrowRight":if(v()&&r.metaKey&&!r.ctrlKey&&!r.altKey)return we(e,n,r);if((v()?r.altKey&&!r.ctrlKey:r.ctrlKey&&!r.altKey)&&!r.metaKey)return Se(e,n,r);var y=Ee(Ie(e,n,r),2);return ce(y[0],t,y[1]);case"Home":return(v()?!r.metaKey||r.ctrlKey:!r.ctrlKey||r.metaKey)||r.altKey?Pe(e,n,r):Oe(e,n,r);case"End":return(v()?!r.metaKey||r.ctrlKey:!r.ctrlKey||r.metaKey)||r.altKey?we(e,n,r):Ce(e,n,r);case"Escape":return"none"==n.suggestionType?[e,n]:[e,ue(n)];default:return function(e,t,n,r){switch(e){case"forwardDelete":return he(t,n);case"backwardDelete":return ye(t,n);case"selectAll":return function(e,t,n){if(!t.cursorCoordinate)return[e,t];var r=e.split("\n"),o={fixed:{lineIndex:0,charIndex:0},free:{lineIndex:r.length-1,charIndex:r[r.length-1].length}};return[e,ue(me(me({},t),{},{textSelection:o}))]}(t,n);case"undo":return function(e,t,n){var r=t.editActionHistory,o=t.historyHead;if(-1==o||""!=t.textAreaValue)return[e,t];var i=r[o];switch(i.actionType){case"insert":var a=q(e,i.coordinate),c=a+i.text.length;return[e.substring(0,a)+e.substring(c),fe(me(me({},t),{},{cursorCoordinate:i.coordinate,historyHead:o-1}))];case"delete":var l=q(e,i.coordinate),s=e.substring(0,l)+i.text+e.substring(l);return[s,fe(me(me({},t),{},{cursorCoordinate:U(s,i.coordinate,i.text.length),historyHead:o-1}))]}}(t,n);case"redo":return function(e,t,n){var r=t.editActionHistory,o=t.historyHead;if(o==r.length-1||""!=t.textAreaValue)return[e,t];var i=r[o+1];switch(i.actionType){case"insert":var a=q(e,i.coordinate),c=e.substring(0,a)+i.text+e.substring(a);return[c,fe(me(me({},t),{},{cursorCoordinate:U(c,i.coordinate,i.text.length),historyHead:o+1}))];case"delete":var l=q(e,i.coordinate),s=l+i.text.length;return[e.substring(0,l)+e.substring(s),fe(me(me({},t),{},{cursorCoordinate:i.coordinate,historyHead:o+1}))]}}(t,n);case"moveUp":return xe(t,n,r);case"moveDown":return ve(t,n,r);case"moveLeft":return be(t,n,r);case"moveRight":return Ie(t,n,r);case"moveWordTop":return ke(t,n,r);case"moveWordBottom":return Se(t,n,r);case"moveLineTop":return Pe(t,n,r);case"moveLineBottom":return we(t,n,r);case"moveTextTop":return Oe(t,n,r);case"moveTextBottom":return Ce(t,n,r);default:return[t,n]}}(o,e,n,r)}}function ze(e,t,n,r){if(!n.cursorCoordinate)return[e,n];var o=r.target.value;if(n.isComposing)return[e,ue(Le(Le({},n),{},{textAreaValue:o}))];var i=Ee(function(){switch(o){case"[":return ie(e,n,"[]",1);case"{":return ie(e,n,"{}",1);case"(":return ie(e,n,"()",1);default:return ie(e,n,o)}}(),2);return ce(i[0],t,i[1])}function $e(e,t,n){return!t.cursorCoordinate||t.isComposing?[e,t]:[e,ue(Le(Le({},t),{},{isComposing:!0}))]}function Re(e,t,n){if(!t.cursorCoordinate||!t.isComposing)return[e,t];var r=Ee(ie(e,t,n.data),2);return[r[0],Le(Le({},r[1]),{},{textAreaValue:"",isComposing:!1})]}function Fe(e,t,n){if(!t.cursorCoordinate||!t.textSelection)return[e,t];n.preventDefault();var r=Y(e,t.textSelection);return n.clipboardData.setData("text/plain",r),ie(e,t,"")}function He(e,t,n){if(!t.cursorCoordinate||!t.textSelection)return[e,t];n.preventDefault();var r=Y(e,t.textSelection);return n.clipboardData.setData("text/plain",r),[e,t]}function Be(e,t,n){return t.cursorCoordinate?(n.preventDefault(),ie(e,t,n.clipboardData.getData("text"))):[e,t]}function Ge(e,t,n){n.preventDefault(),n.stopPropagation(),n.nativeEvent.stopImmediatePropagation();var r=n.currentTarget.textContent;return r?le(e,t,r):[e,t]}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var We=function(e){var n,r,o=t.useRef(null),i=(n=t.useState({position:{top:0,left:0},cursorSize:0}),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1],l=t.useCallback((function(){if(o.current){var t=W(e,a,o.current);t!=a&&c(t)}}),[e,a,c,o]);return t.useEffect((function(){var e=o.current&&F(o.current);return e&&e.addEventListener("scroll",l),function(){e&&e.removeEventListener("scroll",l)}})),t.useEffect((function(){if(o.current){var t=function(e,t,n){var r,o,i=F(n),a=null==i?void 0:i.getBoundingClientRect(),c=null===(r=H(n))||void 0===r?void 0:r.getBoundingClientRect();if(!(e.coordinate&&c&&i&&a))return G(G({},t),{},{position:{top:0,left:0},cursorSize:0});var l="textarea".concat(b(w.textArea.className)),s=null==i?void 0:i.querySelector(l);if(null==s||s.focus({preventScroll:!0}),e.suggestions.length>0){var u=e.suggestionIndex,d=b(w.suggestion.item.className(u)),f="li".concat(d),p=null==i?void 0:i.querySelector(f),m=null==p?void 0:p.parentElement;m&&p&&(p.offsetTop<m.scrollTop?m.scrollTop=p.offsetTop:p.offsetTop+p.clientHeight>m.scrollTop+m.clientHeight&&(m.scrollTop=p.offsetTop+p.clientHeight-m.clientHeight))}var g=e.coordinate,h=R(g.lineIndex,g.charIndex,n),y=null==h||null===(o=h.firstElementChild)||void 0===o?void 0:o.getBoundingClientRect();if(!h||!y)return G(G({},t),{},{position:{top:0,left:0},cursorSize:0});var x={top:y.top-c.top,left:y.left-c.left},v=y.height,I=1.5*v;return y.top-a.top-I<0?(i.scrollTop+=y.top-a.top-I,W(e,t,n)):y.top+v-a.top>a.height-I?(i.scrollTop+=y.top+v-a.top-a.height+I,W(e,t,n)):G(G({},t),{},{position:x,cursorSize:v})}(e,a,o.current);t!=a&&c(t)}}),[e,o]),t.createElement("span",{ref:o},t.createElement(Ue,{position:a.position,cursorSize:a.cursorSize}),t.createElement(qe,{textAreaValue:e.textAreaValue,position:a.position,cursorSize:a.cursorSize,onKeyDown:e.onKeyDown,onTextChange:e.onTextChange,onTextCut:e.onTextCut,onTextCopy:e.onTextCopy,onTextPaste:e.onTextPaste,onTextCompositionStart:e.onTextCompositionStart,onTextCompositionEnd:e.onTextCompositionEnd}),t.createElement(Ve,{suggestionType:e.suggestionType,suggestions:e.suggestions,suggestionIndex:e.suggestionIndex,suggestionListDecoration:e.suggestionListDecoration,position:a.position,cursorSize:a.cursorSize,onSuggectionMouseDown:e.onSuggectionMouseDown}))},Ue=function(e){var n=e.position,r=e.cursorSize;return t.createElement("div",{className:w.cursorBar.className,style:w.cursorBar.style(n,r)},t.createElement("svg",{width:w.svg.width,height:r},t.createElement("rect",{x:w.rect.x,y:w.rect.y,width:w.rect.width,height:w.rect.height})))},qe=function(e){var n=w.textArea,r=e.textAreaValue,o=e.position,i=e.cursorSize;return t.createElement("textarea",{className:n.className,value:r,wrap:n.wrap,spellCheck:n.spellCheck,autoCapitalize:n.autoCapitalize,onKeyDown:function(t){return e.onKeyDown(t)},onChange:function(t){return e.onTextChange(t)},onCut:function(t){return e.onTextCut(t)},onCopy:function(t){return e.onTextCopy(t)},onPaste:function(t){return e.onTextPaste(t)},onCompositionStart:function(t){return e.onTextCompositionStart(t)},onCompositionEnd:function(t){return e.onTextCompositionEnd(t)},style:n.style(o,i,r.length)})},Ve=function(e){var n=w.suggestion,r=e.suggestions,o=e.suggestionIndex,i=e.position,a=e.cursorSize,c=e.suggestionListDecoration||P,l=c.width,s=c.maxHeight,u=c.fontSize;return t.createElement("ul",{className:n.list.className,style:n.list.style(i,a,l,s,0==r.length)},r.map((function(r,i){return t.createElement("li",{key:i,"aria-selected":o==i,className:n.item.className(i),onMouseDown:function(t){return e.onSuggectionMouseDown(t)},style:n.item.style(u)},r)})))},Ye=n(847),Xe={};Xe.styleTagTransform=m(),Xe.setAttributes=u(),Xe.insert=l().bind(null,"head"),Xe.domAPI=a(),Xe.insertStyleElement=f(),o()(Ye.Z,Xe);var Qe={div:{className:(Ye.Z&&Ye.Z.locals?Ye.Z.locals:void 0).selection,style:function(e){return{top:"".concat(e.top,"px"),left:"".concat(e.left,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px")}}}};function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var et=function(e){var n,r,o=(n=t.useState({topDivPosition:void 0,centerDivPosition:void 0,bottomDivPosition:void 0}),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],c=t.useRef(null);return t.useEffect((function(){if(c.current){var t=function(e,t){var n,r=null===(n=H(t))||void 0===n?void 0:n.getBoundingClientRect();if(!e.textSelection||!r)return{topDivPosition:void 0,centerDivPosition:void 0,bottomDivPosition:void 0};var o=X(e.textSelection),i=o.start,a=o.end,c=R(i.lineIndex,i.charIndex,t),l=R(a.lineIndex,a.charIndex,t),s=null==c?void 0:c.getBoundingClientRect(),u=null==l?void 0:l.getBoundingClientRect();if(!s||!u)return{topDivPosition:void 0,centerDivPosition:void 0,bottomDivPosition:void 0};var d=s.bottom-(s.bottom-s.top)/2,f=u.bottom-(u.bottom-u.top)/2;return s.top<=f&&f<=s.bottom||u.top<=d&&d<=u.bottom?{topDivPosition:void 0,centerDivPosition:{top:Math.min(s.top,u.top)-r.top,left:s.left-r.left,width:u.left-s.left,height:Math.max(s.bottom,u.bottom)-Math.min(s.top,u.top)},bottomDivPosition:void 0}:{topDivPosition:{top:s.top-r.top,left:s.left-r.left,width:r.right-s.left,height:s.height},centerDivPosition:{top:s.bottom-r.top,left:0,width:r.width,height:u.top-s.bottom},bottomDivPosition:{top:u.top-r.top,left:0,width:u.left-r.left,height:u.height}}}(e,c.current);t!=i&&a(t)}}),[e,c]),t.createElement("span",{ref:c},i.topDivPosition&&t.createElement("div",{className:Qe.div.className,style:Qe.div.style(i.topDivPosition)}),i.centerDivPosition&&t.createElement("div",{className:Qe.div.className,style:Qe.div.style(i.centerDivPosition)}),i.bottomDivPosition&&t.createElement("div",{className:Qe.div.className,style:Qe.div.style(i.bottomDivPosition)}))},tt=["className"],nt=["className","style"],rt=["className","style"],ot=["className","style"],it=["className","style"],at=["className","style"],ct=["className"],lt=["className"],st=["onMouseEnter","onMouseLeave","onClick","style","overriddenStyleOnHover","cursorOn","children"];function ut(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){if(e){if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ft(e,t):void 0}}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(){return(ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var xt=function(e){var n=e.fromLineIndex,r=e.toLineIndex,o=e.divProps,i=void 0===o?{}:o,a=e.children,c=$.lineGroup.className(n,r),l=i.className,s=yt(i,tt);return t.createElement("div",ht({className:l?"".concat(c," ").concat(l):c},s),a)},vt=function(e){var n=e.indentDepth,r=e.spanProps,o=void 0===r?{}:r,i=e.children,a=$.lineGroup.indent.className,c=$.lineGroup.indent.style(n),l=o.className,s=o.style,u=yt(o,nt);return t.createElement("span",ht({className:l?"".concat(a," ").concat(l):a,style:s?mt(mt({},c),s):c},u),ut(Array(n).keys()).map((function(e){return t.createElement("span",{key:e,className:$.lineGroup.pad.className},t.createElement("span",null," "))})),i)},bt=function(e){var n=e.indentDepth,r=e.spanProps,o=void 0===r?{}:r,i=e.children,a=$.lineGroup.content.className,c=$.lineGroup.content.style(n),l=o.className,s=o.style,u=yt(o,rt);return t.createElement("span",ht({className:l?"".concat(a," ").concat(l):a,style:s?mt(mt({},c),s):c},u),i)},It=function(e){var n=e.lineIndex,r=e.defaultFontSize,o=e.divProps,i=void 0===o?{}:o,a=e.children,c=$.line.className(n),l=$.line.style(r),s=i.className,u=i.style,d=yt(i,ot);return t.createElement("div",ht({className:s?"".concat(c," ").concat(s):c,style:u?mt(mt({},l),u):l},d),a)},kt=function(e){var n=e.lineIndex,r=e.indentDepth,o=e.spanProps,i=void 0===o?{}:o,a=e.children,c=$.line.indent.className,l=$.line.indent.style(r),s=i.className,u=i.style,d=yt(i,it);return t.createElement("span",ht({className:s?"".concat(c," ").concat(s):c,style:u?mt(mt({},l),u):l},d),ut(Array(r).keys()).map((function(e){return t.createElement(wt,{key:e,charIndex:e,lineIndex:n,spanProps:{className:$.line.indentPad.className}}," ")})),a)},St=function(e){var n=e.lineIndex,r=e.indentDepth,o=e.contentLength,i=e.spanProps,a=void 0===i?{}:i,c=e.children,l=$.line.content.className,s=$.line.content.style(r),u=a.className,d=a.style,f=yt(a,at);return t.createElement("span",ht({className:u?"".concat(l," ").concat(u):l,style:d?mt(mt({},s),d):s},f),c,void 0!==o&&t.createElement(wt,{lineIndex:n,charIndex:r+o}," "))},Pt=function(e){var n=e.lineIndex,r=e.fromCharIndex,o=e.toCharIndex,i=e.spanProps,a=void 0===i?{}:i,c=e.children,l=$.charGroup.className(n,r,o),s=a.className,u=yt(a,ct);return t.createElement("span",ht({className:s?"".concat(l," ").concat(s):l},u),c)},wt=function(e){var n=e.lineIndex,r=e.charIndex,o=e.spanProps,i=void 0===o?{}:o,a=e.children,c=$.char.className(n,r),l=i.className,s=yt(i,lt);return t.createElement("span",ht({className:l?"".concat(c," ").concat(l):c},s),t.createElement("span",null,a))},Ot=function(e){var n,r,o=e.onMouseEnter,i=e.onMouseLeave,a=e.onClick,c=e.style,l=e.overriddenStyleOnHover,s=e.cursorOn,u=e.children,d=yt(e,st),f=(n=t.useState(!1),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||dt(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],m=f[1];return t.createElement("a",ht({onMouseEnter:function(e){null==o||o(e),m(!s)},onMouseLeave:function(e){null==i||i(e),m(!1)},onClick:function(e){p?null==a||a(e):e.preventDefault()},style:p?mt(mt({},c),l):c},d),u)};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e){return function(e){if(Array.isArray(e))return Lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t,n){var r=$.regexes.common,o=r.inlineCode,i=r.displayFormula,a=r.inlineFormula,c=r.bracketLink,l=r.hashTag,s=r.normal,u=n.taggedLinkRegexes.find((function(t){return t.test(e)}));if("bracket"==n.syntax){var d=$.regexes.bracketSyntax.decoration;return!n.disabledMap.code&&o.test(e)?Tt(e,t,n):!n.disabledMap.formula&&i.test(e)?Dt(e,t,n):!n.disabledMap.formula&&a.test(e)?Nt(e,t,n):!t.nested&&d.test(e)?function(e,t,n){var r,o=$.regexes.bracketSyntax.decoration,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.left,c=i.decoration,l=i.body,s=i.right,u=function(e,t){for(var n=t.fontSizes,r=n.level1,o=n.level2,i=n.level3,a={bold:!1,italic:!1,underline:!1,fontSize:r},c=0;c<e.length;c++)switch(e[c]){case"*":a.bold?a.fontSize==r?a.fontSize=o:a.fontSize==o&&(a.fontSize=i):a.bold=!0;break;case"/":a.italic=!0;break;case"_":a.underline=!0}return a}(c,n.decoration),d=t.charIndex+a.length,f=t.charIndex+e.length-s.length,p={type:"decoration",lineIndex:t.lineIndex,range:[d,f],facingMeta:"[".concat(c," "),children:Mt(l,Et(Et({},t),{},{charIndex:d+c.length+2,nested:!0,decoration:u}),n),trailingMeta:"]",decoration:u};return[].concat(jt(Mt(a,t,n)),[p],jt(Mt(s,Et(Et({},t),{},{charIndex:f}),n)))}(e,t,n):u?At(e,t,n,u):!n.disabledMap.bracketLink&&c.test(e)?Kt(e,t,n):!n.disabledMap.hashTag&&l.test(e)?zt(e,t,n):s.test(e)?$t(e,t):[]}if("markdown"==n.syntax){var f=$.regexes.markdownSyntax,p=f.bold,m=f.italic;return!n.disabledMap.code&&o.test(e)?Tt(e,t,n):!n.disabledMap.formula&&i.test(e)?Dt(e,t,n):!n.disabledMap.formula&&a.test(e)?Nt(e,t,n):!t.nested&&p.test(e)?function(e,t,n){var r,o=$.regexes.markdownSyntax.bold,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.left,c=i.body,l=i.right,s=t.charIndex+a.length,u=t.charIndex+e.length-l.length,d={type:"decoration",lineIndex:t.lineIndex,range:[s,u],facingMeta:"*",children:Mt(c,Et(Et({},t),{},{charIndex:s+1,nested:!0}),n),trailingMeta:"*",decoration:Et(Et({},t.decoration),{},{bold:!0})};return[].concat(jt(Mt(a,t,n)),[d],jt(Mt(l,Et(Et({},t),{},{charIndex:u}),n)))}(e,t,n):!t.nested&&m.test(e)?function(e,t,n){var r,o=$.regexes.markdownSyntax.italic,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.left,c=i.body,l=i.right,s=t.charIndex+a.length,u=t.charIndex+e.length-l.length,d={type:"decoration",lineIndex:t.lineIndex,range:[s,u],facingMeta:"_",children:Mt(c,Et(Et({},t),{},{charIndex:s+1,nested:!0}),n),trailingMeta:"_",decoration:Et(Et({},t.decoration),{},{italic:!0})};return[].concat(jt(Mt(a,t,n)),[d],jt(Mt(l,Et(Et({},t),{},{charIndex:u}),n)))}(e,t,n):u?At(e,t,n,u):!n.disabledMap.bracketLink&&c.test(e)?Kt(e,t,n):!n.disabledMap.hashTag&&l.test(e)?zt(e,t,n):s.test(e)?$t(e,t):[]}return s.test(e)?$t(e,t):[]}function Tt(e,t,n){var r,o=$.regexes.common.inlineCode,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.left,c=i.code,l=i.right,s=t.charIndex+a.length,u=t.charIndex+e.length-l.length,d={type:"inlineCode",lineIndex:t.lineIndex,range:[s,u],facingMeta:"`",code:c,trailingMeta:"`"};return[].concat(jt(Mt(a,t,n)),[d],jt(Mt(l,Et(Et({},t),{},{charIndex:u}),n)))}function Dt(e,t,n){var r,o=$.regexes.common.displayFormula,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.left,c=i.formula,l=i.right,s=t.charIndex+a.length,u=t.charIndex+e.length-l.length,d={type:"displayFormula",lineIndex:t.lineIndex,range:[s,u],facingMeta:"$$",formula:c,trailingMeta:"$$"};return[].concat(jt(Mt(a,t,n)),[d],jt(Mt(l,Et(Et({},t),{},{charIndex:u}),n)))}function Nt(e,t,n){var r,o=$.regexes.common.inlineFormula,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.left,c=i.formula,l=i.right,s=t.charIndex+a.length,u=t.charIndex+e.length-l.length,d={type:"inlineFormula",lineIndex:t.lineIndex,range:[s,u],facingMeta:"$",formula:c,trailingMeta:"$"};return[].concat(jt(Mt(a,t,n)),[d],jt(Mt(l,Et(Et({},t),{},{charIndex:u}),n)))}function At(e,t,n,r){var o,i=null===(o=e.match(r))||void 0===o?void 0:o.groups,a=i.left,c=i.tag,l=i.linkName,s=i.right,u=t.charIndex+a.length,d=t.charIndex+e.length-s.length,f={type:"taggedLink",lineIndex:t.lineIndex,range:[u,d],facingMeta:"[",tag:c,linkName:l,trailingMeta:"]"};return[].concat(jt(Mt(a,t,n)),[f],jt(Mt(s,Et(Et({},t),{},{charIndex:d}),n)))}function Kt(e,t,n){var r,o=$.regexes.common.bracketLink,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.left,c=i.linkName,l=i.right,s=t.charIndex+a.length,u=t.charIndex+e.length-l.length,d={type:"bracketLink",lineIndex:t.lineIndex,range:[s,u],facingMeta:"[",linkName:c,trailingMeta:"]"};return[].concat(jt(Mt(a,t,n)),[d],jt(Mt(l,Et(Et({},t),{},{charIndex:u}),n)))}function zt(e,t,n){var r,o=$.regexes.common.hashTag,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.left,c=i.hashTag,l=i.right,s=t.charIndex+a.length,u=t.charIndex+e.length-l.length,d={type:"hashTag",lineIndex:t.lineIndex,range:[s,u],hashTag:c};return[].concat(jt(Mt(a,t,n)),[d],jt(Mt(l,Et(Et({},t),{},{charIndex:u}),n)))}function $t(e,t){var n=[t.charIndex,t.charIndex+e.length],r=n[0],o=n[1];return[{type:"normal",lineIndex:t.lineIndex,text:e,range:[r,o]}]}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e,t){var n=t.lineIndex,r=Gt(e[t.lineIndex],t);t.lineIndex++;for(var o=$.regexes.common.blockCodeMeta,i=$.regexes.common.blockCodeLine(r.indentDepth),a={type:"blockCode",range:[n,t.lineIndex],facingMeta:r,children:[]};t.lineIndex<e.length;){if(o.test(e[t.lineIndex])){var c=Gt(e[t.lineIndex],t);return c.indentDepth==r.indentDepth&&(a.trailingMeta=c,t.lineIndex++),a.range[1]=t.lineIndex-1,a}if(!i.test(e[t.lineIndex]))break;a.children.push(Zt(e[t.lineIndex],t,i)),t.lineIndex++}return a.range[1]=t.lineIndex-1,a}function Gt(e,t){var n,r=$.regexes.common.blockCodeMeta,o=null===(n=e.match(r))||void 0===n?void 0:n.groups,i=o.indent,a=o.codeMeta;return{type:"blockCodeMeta",lineIndex:t.lineIndex,indentDepth:i.length,codeMeta:a}}function Zt(e,t,n){var r,o=null===(r=e.match(n))||void 0===r?void 0:r.groups,i=o.indent,a=o.codeLine;return{type:"blockCodeLine",lineIndex:t.lineIndex,indentDepth:i.length,codeLine:a}}function Wt(e,t){var n=t.lineIndex,r=Ut(e[t.lineIndex],t);t.lineIndex++;for(var o=$.regexes.common.blockFormulaMeta,i=$.regexes.common.blockFormulaLine(r.indentDepth),a={type:"blockFormula",range:[n,t.lineIndex],facingMeta:r,children:[]};t.lineIndex<e.length;){if(o.test(e[t.lineIndex])){var c=Ut(e[t.lineIndex],t);return c.indentDepth==r.indentDepth&&(a.trailingMeta=c,t.lineIndex++),a.range[1]=t.lineIndex-1,a}if(!i.test(e[t.lineIndex]))break;a.children.push(qt(e[t.lineIndex],t,i)),t.lineIndex++}return a.range[1]=t.lineIndex-1,a}function Ut(e,t){var n,r=$.regexes.common.blockFormulaMeta,o=null===(n=e.match(r))||void 0===n?void 0:n.groups,i=o.indent,a=o.formulaMeta;return{type:"blockFormulaMeta",lineIndex:t.lineIndex,indentDepth:i.length,formulaMeta:a}}function qt(e,t,n){var r,o=null===(r=e.match(n))||void 0===r?void 0:r.groups,i=o.indent,a=o.formulaLine;return{type:"blockFormulaLine",lineIndex:t.lineIndex,indentDepth:i.length,formulaLine:a}}function Vt(e,t,n){var r,o,i,a,c,l=$.regexes.markdownSyntax.heading,s=null===(r=e.match(l))||void 0===r?void 0:r.groups,u=s.heading,d=s.body,f=(o=u,a=(i=n.decoration.fontSizes).level2,c=i.level3,{bold:!0,italic:!1,underline:!1,fontSize:"#"==o?c:a}),p={type:"decoration",lineIndex:t.lineIndex,range:[0,e.length],facingMeta:"".concat(u," "),children:Mt(d,Ft(Ft({},t),{},{charIndex:u.length+1,nested:!0,decoration:f}),n),trailingMeta:"",decoration:f},m={type:"normalLine",lineIndex:t.lineIndex,contentLength:e.length,children:[p]};return t.lineIndex++,m}function Yt(e,t,n){var r,o=$.regexes.bracketSyntax.itemization,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.indent,c=i.bullet,l=i.content,s={type:"itemization",lineIndex:t.lineIndex,bullet:c,indentDepth:a.length,contentLength:l.length,children:Mt(l,Ft(Ft({},t),{},{charIndex:a.length+c.length}),n)};return t.lineIndex++,s}function Xt(e,t,n){var r,o=$.regexes.common.quotation,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.indent,c=i.content,l={type:"quotation",lineIndex:t.lineIndex,indentDepth:a.length,contentLength:c.length,meta:">",children:Mt(c,Ft(Ft({},t),{},{charIndex:a.length+1}),n)};return t.lineIndex++,l}function Qt(e,t,n){var r,o=$.regexes.markdownSyntax.itemization,i=null===(r=e.match(o))||void 0===r?void 0:r.groups,a=i.indent,c=i.bullet,l=i.content,s={type:"itemization",lineIndex:t.lineIndex,bullet:c,indentDepth:a.length,contentLength:l.length,children:Mt(l,Ft(Ft({},t),{},{charIndex:a.length+c.length}),n)};return t.lineIndex++,s}function Jt(e,t,n){var r={type:"normalLine",lineIndex:t.lineIndex,contentLength:e.length,children:Mt(e,Ft(Ft({},t),{},{charIndex:0}),n)};return t.lineIndex++,r}const en=katex;var tn=n(66),nn={};nn.styleTagTransform=m(),nn.setAttributes=u(),nn.insert=l().bind(null,"head"),nn.domAPI=a(),nn.insertStyleElement=f(),o()(tn.Z,nn),tn.Z&&tn.Z.locals&&tn.Z.locals;var rn=["options","children"];function on(){return(on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var an=function(e){var n=e.options,r=e.children,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,rn),i=null!=r?r:"",a=t.useMemo((function(){try{return(0,en.renderToString)(i,n)}catch(e){return e.message}}),[i,n]);return t.createElement("span",on({},o,{dangerouslySetInnerHTML:{__html:a}}))};function cn(){return(cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ln(e){return function(e){if(Array.isArray(e))return dn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||un(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||un(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){if(e){if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fn=function(e){var n=e.text,r=e.syntax,o=void 0===r?"bracket":r,i=e.cursorCoordinate,a=e.textDecoration,c=void 0===a?T:a,l=e.bracketLinkProps,s=void 0===l?{anchorProps:function(){return{style:N,overriddenStyleOnHover:A}}}:l,u=e.hashTagProps,d=void 0===u?{anchorProps:function(){return{style:N,overriddenStyleOnHover:A}}}:u,f=e.taggedLinkPropsMap,p=void 0===f?{}:f,m=e.codeProps,g=void 0===m?{codeProps:function(){return{style:K}}}:m,h=e.formulaProps,y=void 0===h?{spanProps:function(){return{style:z}}}:h,x=e.style,v=function(e,t){var n=$.regexes.common,r=n.blockCodeMeta,o=n.blockFormulaMeta,i=n.quotation,a=e.split("\n"),c=[],l={lineIndex:0,charIndex:0,nested:!1,decoration:{fontSize:t.decoration.fontSizes.level1,bold:!1,italic:!1,underline:!1}};if("bracket"==t.syntax)for(var s=$.regexes.bracketSyntax.itemization;l.lineIndex<a.length;){var u=a[l.lineIndex];!t.disabledMap.code&&r.test(u)?c.push(Bt(a,l)):!t.disabledMap.formula&&o.test(u)?c.push(Wt(a,l)):i.test(u)?c.push(Xt(u,l,t)):s.test(u)?c.push(Yt(u,l,t)):c.push(Jt(u,l,t))}else if("markdown"==t.syntax)for(var d=$.regexes.markdownSyntax,f=d.heading,p=d.itemization;l.lineIndex<a.length;){var m=a[l.lineIndex];!t.disabledMap.code&&r.test(m)?c.push(Bt(a,l)):!t.disabledMap.formula&&o.test(m)?c.push(Wt(a,l)):f.test(m)?c.push(Vt(m,l,t)):i.test(m)?c.push(Xt(m,l,t)):p.test(m)?c.push(Qt(m,l,t)):c.push(Jt(m,l,t))}else for(;l.lineIndex<a.length;){var g=a[l.lineIndex];c.push(Jt(g,l,t))}return c}(n,{decoration:c,taggedLinkRegexes:Object.entries(p).map((function(e){var t=sn(e,2),n=t[0],r=t[1];return $.regexes.common.taggedLink(n,r.linkNameRegex)})),disabledMap:{bracketLink:s.disabled,hashTag:d.disabled,code:g.disabled,formula:y.disabled},syntax:o});return t.createElement("div",{className:$.className,style:x},v.map((function(e,n){return t.createElement(pn,{key:n,node:e,textDecoration:c,bracketLinkProps:s,hashTagProps:d,taggedLinkPropsMap:p,codeProps:g,formulaProps:y,curcorLineIndex:null==i?void 0:i.lineIndex})})))},pn=function e(n){var r=n.node,o=n.textDecoration,i=n.bracketLinkProps,a=n.hashTagProps,c=n.taggedLinkPropsMap,l=n.codeProps,s=n.formulaProps,u=n.curcorLineIndex;switch(r.type){case"blockCode":var d=r.facingMeta,f=r.children,p=r.trailingMeta;return t.createElement(t.Fragment,null,t.createElement(e,{node:d,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u}),f.map((function(n,r){return t.createElement(e,{key:r,node:n,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u})})),p&&t.createElement(e,{node:p,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u}));case"blockCodeMeta":case"blockCodeLine":var m,g=r.lineIndex,h=r.indentDepth,y="blockCodeMeta"==r.type?r.codeMeta:r.codeLine,x=null===(m=l.codeProps)||void 0===m?void 0:m.call(l,y);return t.createElement(It,{lineIndex:g,defaultFontSize:o.fontSizes.level1},t.createElement(kt,{lineIndex:g,indentDepth:h}),t.createElement(St,{lineIndex:g,indentDepth:h,contentLength:y.length,spanProps:{style:null==x?void 0:x.style}},t.createElement("code",x,ln(y).map((function(e,n){return t.createElement(wt,{key:h+n,lineIndex:g,charIndex:h+n},e)})))));case"blockFormula":var v,b=r.facingMeta,I=r.children,k=r.trailingMeta,S=sn(r.range,2),P=S[0],w=S[1],O=I.map((function(e){return e.formulaLine})).join("\n"),C=void 0!==u&&P<=u&&u<=w,E=null===(v=s.spanProps)||void 0===v?void 0:v.call(s,O);return C||/^\s*$/.test(O)?t.createElement(t.Fragment,null,t.createElement(e,{node:b,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u}),I.map((function(n,r){return t.createElement(e,{key:r,node:n,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u})})),k&&t.createElement(e,{node:k,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u})):t.createElement(xt,{fromLineIndex:P+1,toLineIndex:k?w-1:w,divProps:{onMouseDown:function(e){return e.nativeEvent.stopImmediatePropagation()}}},t.createElement(vt,{indentDepth:b.indentDepth}),t.createElement(bt,{indentDepth:b.indentDepth,spanProps:{style:null==E?void 0:E.style}},t.createElement(an,{options:{throwOnError:!1,displayMode:!0}},O)));case"blockFormulaMeta":case"blockFormulaLine":var _,j=r.lineIndex,L=r.indentDepth,M="blockFormulaMeta"==r.type?r.formulaMeta:r.formulaLine,T=null===(_=s.spanProps)||void 0===_?void 0:_.call(s,M);return t.createElement(It,{lineIndex:j,defaultFontSize:o.fontSizes.level1},t.createElement(kt,{lineIndex:j,indentDepth:L}),t.createElement(St,{lineIndex:j,indentDepth:L,contentLength:M.length,spanProps:{style:null==T?void 0:T.style}},ln(M).map((function(e,n){return t.createElement(wt,{key:L+n,lineIndex:j,charIndex:L+n},e)}))));case"quotation":var D=r.lineIndex,N=r.indentDepth,A=r.contentLength,K=r.meta,z=r.children,R=u==D;return t.createElement(It,{lineIndex:D,defaultFontSize:o.fontSizes.level1},t.createElement(kt,{lineIndex:D,indentDepth:N}),t.createElement(St,{lineIndex:D,indentDepth:N,contentLength:K.length+A,spanProps:{style:$.quotation.content.style}},ln(K).map((function(e,n){return t.createElement(wt,{key:N+n,lineIndex:D,charIndex:N+n},R?e:"​")})),z.map((function(n,r){return t.createElement(e,{key:r,node:n,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u})}))));case"itemization":var F=r.lineIndex,H=r.indentDepth,B=r.contentLength,G=r.children;return t.createElement(It,{lineIndex:F,defaultFontSize:o.fontSizes.level1},t.createElement(kt,{lineIndex:F,indentDepth:H+1},t.createElement("span",{className:$.itemization.bullet.className})),t.createElement(St,{lineIndex:F,indentDepth:H+1,contentLength:B},G.map((function(n,r){return t.createElement(e,{key:r,node:n,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u})}))));case"normalLine":var Z=r.lineIndex,W=r.contentLength,U=r.children;return t.createElement(It,{lineIndex:Z,defaultFontSize:o.fontSizes.level1},t.createElement(St,{lineIndex:Z,indentDepth:0,contentLength:W},U.map((function(n,r){return t.createElement(e,{key:r,node:n,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u})}))));case"inlineCode":var q,V=r.lineIndex,Y=r.facingMeta,X=r.code,Q=r.trailingMeta,J=sn(r.range,2),ee=J[0],te=J[1],ne=u==V,re=null===(q=l.codeProps)||void 0===q?void 0:q.call(l,X);return t.createElement("code",re,ln(Y).map((function(e,n){return t.createElement(wt,{key:ee+n,lineIndex:V,charIndex:ee+n},ne?e:"​")})),ln(X).map((function(e,n){return t.createElement(wt,{key:ee+Y.length+n,lineIndex:V,charIndex:ee+Y.length+n},e)})),ln(Q).map((function(e,n){return t.createElement(wt,{key:te-Q.length+n,lineIndex:V,charIndex:te-Q.length+n},ne?e:"​")})));case"displayFormula":case"inlineFormula":var oe,ie=r.lineIndex,ae=r.facingMeta,ce=r.formula,le=r.trailingMeta,se=sn(r.range,2),ue=se[0],de=se[1],fe=u==ie,pe=null===(oe=s.spanProps)||void 0===oe?void 0:oe.call(s,ce),me="displayFormula"==r.type;return fe?t.createElement("span",{style:null==pe?void 0:pe.style},[].concat(ln(ae),ln(ce),ln(le)).map((function(e,n){return t.createElement(wt,{key:ue+n,lineIndex:ie,charIndex:ue+n},e)}))):t.createElement(Pt,{lineIndex:ie,fromCharIndex:ue+ae.length,toCharIndex:de-le.length,spanProps:{onMouseDown:function(e){return e.nativeEvent.stopImmediatePropagation()},style:null==pe?void 0:pe.style}},t.createElement(an,{options:{throwOnError:!1,displayMode:me}},ce));case"decoration":var ge=r.lineIndex,he=r.facingMeta,ye=r.decoration,xe=r.trailingMeta,ve=r.children,be=sn(r.range,2),Ie=be[0],ke=be[1],Se=u==ge;return t.createElement("span",{style:$.decoration.style(ye)},ln(he).map((function(e,n){return t.createElement(wt,{key:Ie+n,lineIndex:ge,charIndex:Ie+n},Se?e:"​")})),ve.map((function(n,r){return t.createElement(e,{key:r,node:n,textDecoration:o,bracketLinkProps:i,hashTagProps:a,taggedLinkPropsMap:c,codeProps:l,formulaProps:s,curcorLineIndex:u})})),ln(xe).map((function(e,n){return t.createElement(wt,{key:ke-xe.length+n,lineIndex:ge,charIndex:ke-xe.length+n},Se?e:"​")})));case"taggedLink":var Pe,we=r.lineIndex,Oe=r.facingMeta,Ce=r.tag,Ee=r.linkName,_e=r.trailingMeta,je=sn(r.range,2),Le=je[0],Me=je[1],Te=u==we,De=c[function(e){return e.substring(0,e.length-2)}(Ce)],Ne=null===(Pe=De.anchorProps)||void 0===Pe?void 0:Pe.call(De,Ee);return t.createElement(Ot,cn({},Ne,{cursorOn:Te}),ln(Oe).map((function(e,n){return t.createElement(wt,{key:Le+n,lineIndex:we,charIndex:Le+n},Te?e:"​")})),ln(Ce).map((function(e,n){return t.createElement(wt,{key:Le+Oe.length+n,lineIndex:we,charIndex:Le+Oe.length+n},Te||!De.tagHidden?e:"​")})),ln(Ee).map((function(e,n){return t.createElement(wt,{key:Le+Oe.length+Ce.length+n,lineIndex:we,charIndex:Le+Oe.length+Ce.length+n},e)})),ln(_e).map((function(e,n){return t.createElement(wt,{key:Me-_e.length+n,lineIndex:we,charIndex:Me-_e.length+n},Te?e:"​")})));case"bracketLink":var Ae,Ke=r.lineIndex,ze=r.facingMeta,$e=r.linkName,Re=r.trailingMeta,Fe=sn(r.range,2),He=Fe[0],Be=Fe[1],Ge=u==Ke,Ze=null===(Ae=i.anchorProps)||void 0===Ae?void 0:Ae.call(i,$e);return t.createElement(Ot,cn({},Ze,{cursorOn:Ge}),ln(ze).map((function(e,n){return t.createElement(wt,{key:He+n,lineIndex:Ke,charIndex:He+n},Ge?e:"​")})),ln($e).map((function(e,n){return t.createElement(wt,{key:He+ze.length+n,lineIndex:Ke,charIndex:He+ze.length+n},e)})),ln(Re).map((function(e,n){return t.createElement(wt,{key:Be-Re.length+n,lineIndex:Ke,charIndex:Be-Re.length+n},Ge?e:"​")})));case"hashTag":var We,Ue=r.lineIndex,qe=r.hashTag,Ve=sn(r.range,1)[0],Ye=u==Ue,Xe=null===(We=a.anchorProps)||void 0===We?void 0:We.call(a,function(e){return e.substring(1).replaceAll("_"," ")}(qe));return t.createElement(Ot,cn({},Xe,{cursorOn:Ye}),ln(qe).map((function(e,n){return t.createElement(wt,{key:Ve+n,lineIndex:Ue,charIndex:Ve+n},e)})));case"normal":var Qe=r.lineIndex,Je=r.text,et=sn(r.range,1)[0];return t.createElement("span",null,ln(Je).map((function(e,n){return t.createElement(wt,{key:et+n,lineIndex:Qe,charIndex:et+n},e)})))}};function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vn=function(e){var n,r,o=yn(t.useState({cursorCoordinate:void 0,textAreaValue:"",isComposing:!1,textSelection:void 0,selectionWithMouse:"inactive",historyHead:-1,editActionHistory:[],suggestionType:"none",suggestions:[],suggestionIndex:-1}),2),i=o[0],a=o[1],c=t.useRef(null),l=t.useCallback((function(t){return function(n){if(!e.readonly&&0==n.button){var r=yn(t(e.text,i,n,c.current),2),o=r[0],l=r[1];l!=i&&a(l),o!=e.text&&e.onChangeText(o)}}}),[i,e,a,c]),s=t.useCallback((function(t){return function(n){if(!e.readonly){var r=yn(t(e.text,i,n),2),o=r[0],c=r[1];c!=i&&a(c),o!=e.text&&e.onChangeText(o)}}}),[i,e,a]),u=t.useCallback((function(t){return function(n){if(!e.readonly){var r=yn(t(e.text,e,i,n),2),o=r[0],c=r[1];c!=i&&a(c),o!=e.text&&e.onChangeText(o)}}}),[i,e,a]),d=t.useCallback((function(e){return l(Te)(e)}),[l]),f=t.useCallback((function(e){return l(De)(e)}),[l]),p=t.useCallback((function(e){return l(Ne)(e)}),[l]),m=t.useCallback((function(t){!e.readonly&&i.cursorCoordinate&&c.current&&!c.current.contains(t.target)&&a(gn(gn({},i),{},{cursorCoordinate:void 0,textAreaValue:"",isComposing:!1,textSelection:void 0,selectionWithMouse:"inactive",suggestionType:"none",suggestions:[],suggestionIndex:-1}))}),[e.readonly,i,a,c]);return t.useEffect((function(){return document.addEventListener("mousemove",f),function(){document.removeEventListener("mousemove",f)}}),[f]),t.useEffect((function(){return document.addEventListener("mouseup",p),function(){document.removeEventListener("mouseup",p)}}),[p]),t.useEffect((function(){return document.addEventListener("mousedown",m),function(){document.removeEventListener("mousedown",m)}}),[m]),t.createElement("div",{style:e.style},t.createElement("div",{className:x.root.className,ref:c},t.createElement("div",{className:x.editor.className,onMouseDown:d,onClick:l(Ae)},t.createElement(We,{coordinate:i.cursorCoordinate,textAreaValue:i.textAreaValue,suggestionType:i.suggestionType,suggestions:i.suggestions,suggestionIndex:i.suggestionIndex,suggestionListDecoration:null===(n=e.decoration)||void 0===n?void 0:n.suggestionList,onKeyDown:u(Ke),onTextChange:u(ze),onTextCompositionStart:s($e),onTextCompositionEnd:s(Re),onTextCut:s(Fe),onTextCopy:s(He),onTextPaste:s(Be),onSuggectionMouseDown:s(Ge)}),t.createElement(et,{textSelection:i.textSelection}),t.createElement(fn,{text:e.text,syntax:e.syntax,cursorCoordinate:i.cursorCoordinate,textDecoration:null===(r=e.decoration)||void 0===r?void 0:r.text,bracketLinkProps:e.bracketLinkProps,hashTagProps:e.hashTagProps,codeProps:e.codeProps,formulaProps:e.formulaProps,taggedLinkPropsMap:e.taggedLinkPropsMap}))))};function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wn={width:"calc(48vw - 60px)",height:"calc(96vh - 60px)",margin:"20px",border:"solid 1px",padding:"10px",display:"inline-block"},On=function(){var e=Sn(t.useState("[*** React Realtime Markup Editor]\nA text document editor which is syntactically formattable in real time\n[/ bracket-based syntax]\n\n[** Itemizations]\n You can use itemizations\n by just typing a space\n like this\n  You can also use nested itemizations\n  by just typing multiple spaces\n  like this\n\n[** Shortcut commands]\n select all\n cut\n copy\n paste\n undo\n redo\n move up\n move down\n move left\n move right\n move to word top\n move to word bottom\n move to line top\n move to line bottom\n move to text top\n move to text bottom\n\n[** Text decorations]\n [* bold]\n [/ italic]\n [_ underline]\n\nYou can combine these text decorations\n [*/ bold italic]\n [*_ bold underline]\nand so on\n\n[** Links]\n bracket-link\n  [react-realtime-markup-editor]\n hash-tag-link\n  #react-realtime-markup-editor\n tagged-link\n  [github: @kumachan-mis/react-realtime-markup-editor]\n  [npm: react-realtime-markup-editor]\n\n[** Code strings]\n inline mode\n  `import { Editor } from 'react-realtime-markup-editor'`\n block mode\n  ```\n  import { Editor } from 'react-realtime-markup-editor';\n  const App: React.FC = () => {\n    const [text, setText] = React.useState('');\n    return <Editor text={text} onChangeText={setText} />;\n  };\n  // note: code block is not a bulleted item\n  ```\n\n[** Math formulas]\n inline mode\n  $f(x)$\n display mode\n  $$\\int_a^b f(x) \\mathrm{d}x$$\n block mode\n  $$\n  A =\n  \\left(\n  \\begin{matrix}\n    a_{11} & a_{12} & \\cdots & a_{1n} \\\\\n    a_{21} & a_{22} & \\cdots & a_{2n} \\\\\n    \\vdots & \\vdots & \\ddots & \\vdots \\\\\n    a_{m1} & a_{m2} & \\cdots & a_{mn} \\\\\n  \\end{matrix}\n  \\right)\n  $$\n\n[** Quatations]\n>Genius is one percent inspiration and ninety-nine percent perspiration\n>by Thomas Edison"),2),n=e[0],r=e[1],o=Sn(t.useState("# React Realtime Markup Editor\nA text document editor which is syntactically formattable in real time\n_markdown-like syntax_\n\n## Itemizations\n-You can use itemizations\n-by just typing a `-` or `*`\n-like this\n -You can also use nested itemizations\n -by just typing spaces\n -like this\n\n## Shortcut commands\n-select all\n-cut\n-copy\n-paste\n-undo\n-redo\n-move up\n-move down\n-move left\n-move right\n-move to word top\n-move to word bottom\n-move to line top\n-move to line bottom\n-move to text top\n-move to text bottom\n\n## Text decorations\n-*bold*\n-_italic_\n\ncombination of text decorations is not supported yet\n\n## Links\n-bracket-link\n -[react-realtime-markup-editor]\n-hash-tag-link\n -#react-realtime-markup-editor\n-tagged-link\n -[github: @kumachan-mis/react-realtime-markup-editor]\n -[npm: react-realtime-markup-editor]\n\n## Code strings\n-inline mode\n -`import { Editor } from 'react-realtime-markup-editor'`\n-block mode\n  ```\n  import { Editor } from 'react-realtime-markup-editor';\n  const App: React.FC = () => {\n    const [text, setText] = React.useState('');\n    return <Editor text={text} onChangeText={setText} />;\n  };\n  // note: code block is not a bulleted item\n  ```\n\n## Math formulas\n-inline mode\n -$f(x)$\n-display mode\n -$$\\int_a^b f(x) \\mathrm{d}x$$\n-block mode\n  $$\n  A =\n  \\left(\n  \\begin{matrix}\n    a_{11} & a_{12} & \\cdots & a_{1n} \\\\\n    a_{21} & a_{22} & \\cdots & a_{2n} \\\\\n    \\vdots & \\vdots & \\ddots & \\vdots \\\\\n    a_{m1} & a_{m2} & \\cdots & a_{mn} \\\\\n  \\end{matrix}\n  \\right)\n  $$\n\n## Quatations\n>Genius is one percent inspiration and ninety-nine percent perspiration\n>by Thomas Edison"),2),i=o[0],a=o[1];return t.createElement(t.Fragment,null,[[n,r,"bracket"],[i,a,"markdown"]].map((function(e){var n=Sn(e,3),r=n[0],o=n[1],i=n[2];return t.createElement(vn,{key:i,text:r,onChangeText:o,syntax:i,bracketLinkProps:{anchorProps:function(e){return{href:"https://www.npmjs.com/package/".concat(e),style:N,overriddenStyleOnHover:A}}},hashTagProps:{anchorProps:function(e){return{href:"https://www.npmjs.com/package/".concat(e),style:N,overriddenStyleOnHover:A}},suggestions:["react-realtime-markup-editor"]},taggedLinkPropsMap:{github:{linkNameRegex:/@[^[\]]+\/[^[\]]+/,anchorProps:function(e){return{href:"https://github.com/".concat(e.substring(1)),style:In(In({},N),{},{color:"#595f6E",borderBottom:"solid 1px"}),overriddenStyleOnHover:In(In({},A),{},{color:"#08090B",fontWeight:500})}},suggestions:["@kumachan-mis/react-realtime-markup-editor"]},npm:{anchorProps:function(e){return{href:"https://www.npmjs.com/package/".concat(e),style:In(In({},N),{},{color:"#F75E8A",borderBottom:"solid 1px"}),overriddenStyleOnHover:In(In({},A),{},{color:"#E14978",fontWeight:500})}},suggestions:["react-realtime-markup-editor"]}},style:wn})})))};(0,e.render)(t.createElement(On,null),document.getElementById("app"))})()})();